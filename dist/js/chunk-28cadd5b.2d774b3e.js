(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-28cadd5b"],{"02f8":function(e,t,a){"use strict";a("1981")},1981:function(e,t,a){},"1f49":function(e,t,a){},"28a5":function(e,t,a){"use strict";a("1f49")},a53e:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{style:{height:e.height+"px",backgroundColor:"#eee"}},[a("div",{staticClass:"out-wrapper"},[a("a-row",[a("a-col",{attrs:{span:1}}),a("a-col",{attrs:{span:22}},[a("a-card",{staticClass:"user-list",attrs:{title:"用户管理"}},[a("UserList")],1)],1),a("a-col",{attrs:{span:1}})],1)],1)])},r=[],s=function(){var e=this,t=this,a=t.$createElement,o=t._self._c||a;return o("div",[o("a-button",{attrs:{size:"small",type:"primary"},on:{click:function(){return e.visible2=!0}}},[t._v(" 添加用户 ")]),o("a-popconfirm",{attrs:{title:"您确定要删除这些用户？","ok-text":"Yes","cancel-text":"No"},on:{confirm:function(e){return t.deleteUsers()}}},[o("a-button",{staticStyle:{"margin-left":"30px"},attrs:{size:"small",type:"danger"}},[t._v(" 删除所选用户 ")])],1),o("a-table",{attrs:{loading:t.loading,columns:t.columns,"data-source":t.userList,pagination:t.ipagination,"row-selection":t.rowSelection},on:{change:t.handleTableChange},scopedSlots:t._u([{key:"authority",fn:function(e){return o("span",{},[o("a-tag",{key:e,attrs:{color:t.authorityTagconfig[e].color}},[t._v(" "+t._s(t.authorityTagconfig[e].name)+" ")])],1)}},{key:"operation",fn:function(e,a){return[o("div",{staticClass:"editable-row-operations"},[o("a",{on:{click:function(){return t.openMoral(a)}}},[t._v("Edit")])])]}}])}),o("a-modal",{attrs:{title:"修改用户信息",centered:"",model:t.user},on:{ok:function(){return t.submitChange()}},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[o("a-form",{attrs:{layout:"horizontal"}},[o("a-form-item",{attrs:{label:"username","label-col":4,"wrapper-col":14}},[o("a-input",{model:{value:t.user.username,callback:function(e){t.$set(t.user,"username",e)},expression:"user.username"}})],1),o("a-form-item",{attrs:{label:"email","label-col":4,"wrapper-col":14}},[o("a-input",{model:{value:t.user.email,callback:function(e){t.$set(t.user,"email",e)},expression:"user.email"}})],1),o("a-form-item",{attrs:{label:"tel","label-col":4,"wrapper-col":14}},[o("a-input",{model:{value:t.user.tel,callback:function(e){t.$set(t.user,"tel",e)},expression:"user.tel"}})],1),o("a-form-item",{attrs:{label:"level","label-col":4,"wrapper-col":14}},[o("a-input",{model:{value:t.user.level,callback:function(e){t.$set(t.user,"level",e)},expression:"user.level"}})],1),o("a-form-model-item",{attrs:{label:"Authority"}},[o("a-radio-group",{model:{value:t.user.authority,callback:function(e){t.$set(t.user,"authority",e)},expression:"user.authority"}},[o("a-radio",{attrs:{value:0}},[t._v(" 普通用户 ")]),o("a-radio",{attrs:{value:1}},[t._v(" 管理员 ")]),o("a-radio",{attrs:{value:2}},[t._v(" 封禁用户 ")])],1)],1)],1)],1),o("a-modal",{attrs:{title:"修改用户信息",centered:"",model:t.form},on:{ok:function(){return t.addUser()}},model:{value:t.visible2,callback:function(e){t.visible2=e},expression:"visible2"}},[o("a-form",{attrs:{layout:"horizontal"}},[o("a-form-item",{attrs:{label:"username","label-col":4,"wrapper-col":14}},[o("a-input",{model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}})],1),o("a-form-item",{attrs:{label:"password"}},[o("a-input-password",{model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),o("a-form-item",{attrs:{label:"email","label-col":4,"wrapper-col":14}},[o("a-input",{model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),o("a-form-item",{attrs:{label:"tel","label-col":4,"wrapper-col":14}},[o("a-input",{model:{value:t.form.tel,callback:function(e){t.$set(t.form,"tel",e)},expression:"form.tel"}})],1),o("a-form-item",{attrs:{label:"level","label-col":4,"wrapper-col":14}},[o("a-input",{model:{value:t.form.level,callback:function(e){t.$set(t.form,"level",e)},expression:"form.level"}})],1),o("a-form-model-item",{attrs:{label:"Authority"}},[o("a-radio-group",{model:{value:t.form.authority,callback:function(e){t.$set(t.form,"authority",e)},expression:"form.authority"}},[o("a-radio",{attrs:{value:0}},[t._v(" 普通用户 ")]),o("a-radio",{attrs:{value:1}},[t._v(" 管理员 ")]),o("a-radio",{attrs:{value:2}},[t._v(" 封禁用户 ")])],1)],1)],1)],1)],1)},l=[],i=[{title:"username",dataIndex:"username",scopedSlots:{customRender:"username"}},{title:"email",dataIndex:"email",scopedSlots:{customRender:"email"}},{title:"tel",dataIndex:"tel",scopedSlots:{customRender:"tel"}},{title:"level",dataIndex:"level",scopedSlots:{customRender:"level"}},{title:"authority",dataIndex:"authority",scopedSlots:{customRender:"authority"}},{title:"operation",dataIndex:"operation",scopedSlots:{customRender:"operation"}}],n={inject:["reload"],data:function(){return{columns:i,editingKey:"",defaultCurrent:1,defaultPageSize:10,total:0,userList:{},visible:!1,user:{},cacheUser:{},authorityTagconfig:[{name:"普通用户",color:"#108ee9"},{name:"管理员",color:"#87d068"},{name:"封禁用户",color:"#f50"}],loading:!0,visible2:!1,form:{},ipagination:{current:1,pageSize:10,pageSizeOptions:["10","20","30"],showTotal:function(e,t){return t[0]+"-"+t[1]+"共"+e+"条"},showQuickJumper:!0,showSizeChanger:!0,total:0},selected:[]}},methods:{edit:function(e){console.log(e)},getUserPagination:function(e,t){var a=this;this.loading=!0,this.$api.user.getUserPagination(e,t).then((function(e){0===e.code?(a.userList=e.data.records,a.ipagination.total=e.data.total,a.loading=!1):a.$message.error(e.msg)}))},handleTableChange:function(e){this.ipagination.current=e.current,this.ipagination.pageSize=e.pageSize,this.getUserPagination(e.current,e.pageSize)},openMoral:function(e){this.user=e,this.cacheUser=e,this.visible=!0},submitChange:function(){var e=this;this.$api.user.updateUser(this.user).then((function(t){0===t.code?(e.visible=!1,e.reload(),e.$message.success(t.data)):(e.visible=!1,e.user=e.cacheUser,e.$message.error(t.msg))}))},addUser:function(){var e=this;this.$api.user.register(this.form).then((function(t){0===t.code?(e.$message.success("注册成功"),e.reload()):e.$message.error(t.msg)}))},deleteUsers:function(){var e=this;0!=this.selected.length?this.$api.user.delete(this.selected).then((function(t){0===t.code?(e.$message.success(t.data),e.reload()):e.$message.error(t.msg)})):this.$message.error("未选择用户")}},mounted:function(){this.getUserPagination(this.defaultCurrent,this.defaultPageSize)},computed:{rowSelection:function(){var e=this;return{onChange:function(t,a){e.selected=a,console.log("selectedRowKeys: ".concat(t),"selectedRows: ",a)}}}}},u=n,c=(a("02f8"),a("2877")),m=Object(c["a"])(u,s,l,!1,null,"677e16b2",null),d=m.exports,p={name:"User",data:function(){return{height:"".concat(document.documentElement.clientHeight)}},components:{UserList:d},methods:{}},f=p,h=(a("28a5"),Object(c["a"])(f,o,r,!1,null,"4633b2e8",null));t["default"]=h.exports}}]);
//# sourceMappingURL=chunk-28cadd5b.2d774b3e.js.map