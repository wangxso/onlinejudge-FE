(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-616f497e"],{2065:function(e,t,a){},"74b9":function(e,t,a){"use strict";a("2065")},e537:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-row",[a("a-col",{attrs:{span:18}},[a("PersonalInfo")],1),a("a-col",{attrs:{span:2}}),a("a-col",{attrs:{span:4}})],1)],1)},r=[],l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",[a("el-tabs",{attrs:{"tab-position":"left",stretch:!0}},[a("el-tab-pane",{attrs:{label:"基本信息"}},[a("a-col",{attrs:{span:11}},[a("UserInfo",{attrs:{user:e.user}})],1),a("a-col",{attrs:{span:1}}),a("a-col",{attrs:{span:11}},[a("label",{attrs:{for:"container"}},[e._v("用户通过统计图")]),a("div",{attrs:{id:"container"}})])],1),a("el-tab-pane",{attrs:{label:"头像管理"}},[a("Avatar",{staticStyle:{"margin-left":"40%"},attrs:{user:e.user}})],1),a("el-tab-pane",{attrs:{label:"角色管理"}}),a("el-tab-pane",{attrs:{label:"定时任务补偿"}})],1)],1)],1)},n=[],o=a("99afe"),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"dynamicValidateForm",staticClass:"demo-dynamic",attrs:{model:e.user,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"用户名"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.user.username,callback:function(t){e.$set(e.user,"username",t)},expression:"user.username"}})],1),a("el-form-item",{attrs:{label:"邮箱"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}})],1),a("el-form-item",{attrs:{label:"手机号"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.user.tel,callback:function(t){e.$set(e.user,"tel",t)},expression:"user.tel"}})],1),a("el-form-item",{attrs:{label:"分数"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.user.level,callback:function(t){e.$set(e.user,"level",t)},expression:"user.level"}})],1),a("el-form-item",{attrs:{label:"账户角色"}},[a("el-tag",{staticStyle:{color:"#303133"},attrs:{color:e.authority_list[e.user.authority].color}},[e._v(e._s(e.authority_list[e.user.authority].type))])],1)],1)},u=[],c=[{type:"普通用户",color:"#409EFF"},{type:"管理员",color:"#67C23A"},{type:"封禁用户",color:"#F56C6C"}],d={props:["user"],data:function(){return{authority_list:c}},methods:{submitForm:function(e){this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;alert("submit!")}))}}},p=d,m=a("2877"),f=Object(m["a"])(p,i,u,!1,null,null,null),v=f.exports,b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-upload",{staticClass:"avatar-uploader",staticStyle:{margin:"1%"},attrs:{action:e.uploadUrl,"show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.imageUrl?a("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),a("el-button",{staticStyle:{margin:"6%"},attrs:{type:"primary"},on:{click:e.updateAvatar}},[e._v("确定修改")])],1)},h=[],g=a("01e7"),y=a("9fb0"),A={name:"Avatar",props:["user"],data:function(){return{loading:!1,imageUrl:"",uploadUrl:g["a"]+"user/avatar"}},methods:{handleAvatarSuccess:function(e){this.imageUrl=e.data},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a},updateAvatar:function(){var e=this,t=this.user.avatar;this.user.avatar=this.imageUrl,this.$api.user.updateUser(this.user).then((function(a){0===a.code?(e.$store.commit(y["b"],e.user),e.$message.success(a.data)):(e.user.avatar=t,e.$message.error("serve error"))}))}}},$=A,U=(a("74b9"),Object(m["a"])($,b,h,!1,null,null,null)),_=U.exports,w={name:"PersonalInfo",components:{UserInfo:v,Avatar:_},data:function(){return{user:this.$store.state.user,passAndTotal:[]}},methods:{findUserSubmissionPassAndTotal:function(e){var t=this;this.$api.user.findUserSubmissionPassAndTotal(e).then((function(e){0===e.code?(t.passAndTotal=e.data,t.draw()):t.$message.error(e.msg)}))},draw:function(){var e=[{type:"通过数",value:this.passAndTotal["pass"]},{type:"未通过数",value:this.passAndTotal["total"]-this.passAndTotal["pass"]}];console.log(e);var t=new o["Pie"]("container",{data:e,angleField:"value",colorField:"type",radius:.8,height:180,width:180,autoFit:!0,label:{type:"outer",content:"{name} {percentage}"},interactions:[{type:"pie-legend-active"},{type:"element-active"}],color:function(e){var t=e.type;return"通过数"===t?"#67C23A":"#F56C6C"}});t.render()}},mounted:function(){this.findUserSubmissionPassAndTotal(this.user.uid)}},C=w,x=Object(m["a"])(C,l,n,!1,null,"0107189a",null),F=x.exports,S={name:"personal",components:{PersonalInfo:F}},k=S,P=Object(m["a"])(k,s,r,!1,null,"6dcefb56",null);t["default"]=P.exports}}]);
//# sourceMappingURL=chunk-616f497e.ab713dde.js.map